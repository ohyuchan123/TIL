# 🌐 인터넷 네트워크 통신 기초
`IP/TCP/UDP/PORT/DNS`

## 인터넷 통신은 어떻게 이루어지는가
---

✒️클라이언트에서 다른 클라이언트(컴퓨터)로 데이터를 배낼 경우 위치에 따라 위성, 해저광 케이블, 기타 통신 서버와 같은 인터넷망을 거쳐서 상대 컴퓨터에 도달하게 된다.

✒️그런데 인터넷 망은 단순하지 않아, 아래 그림과 같이 **수 많은 중간 노드**를 거쳐서 서버 컴퓨터에 도착한다.

✒️이렇게 웹 통신 과정이 어떤 규칙으로 목적지까지 안전하게 도착하는지의 이해를 하기 위해 이제부터 정리할 IP,UDP,DNS 프로토콜 지식들을 알아야 한다.

## IP(인터넷 프로토콜)
우리가 인터넷을 사용하면 한번쯤은 들어본 아이피(IP)란 송신/수신 클라이언트에서 정보를 주고받을 때 사용하는 정보 위주의 프로토콜을 말한다.

IP의 역할은 **<span style="color:#FF3232">패킷</span>이라는 통신 단위로 지정한 IP 주소에 데이터를 전달**하는 것에 목적을 둔다.

### IP 패킷 정보
IP를 통해 데이터를 상대 클라이언트에 보낼때 **패킷**이라는 특수한 데이터 구조로 보낸다고 설명했었다.

한마디로 **인터넷 데이터를 패킷에 포장하여 인터넷 망을 통해서 전달**한다고 생각하면 된다.

1. 클라이언트 패킷 전달  
✒️ 규칙에 맞춰 보내면 노드끼리 서로 주고 받으며 도착지에 도착하게 된다.


2. 서버 패킷 전달  
✒️그럼 데이터를 받은 상대반도 같은 방식으로 잘 받았다는 애용을 전달한다.


### IP 프로토콜의 한계
하지만 단순히 IP 주소를 통해 데이터를 보내는 데에는 한계가 있다.

중간에 패킷이 유실될 수 있으며, 만일 상대 컴퓨터가 어떠한 에러가 생겨 받을 수 없는 상황이어도 무작정 보내거나, 패킷들이 순서대로 도착한다는 보장도 없기 때문이다.

1. 비연결성  
✒️패킷을 받을 대상이 없거나 <span style="color:#FF3232">서비스가 불능 상태여도 패킷을 전송할 수 있다.</span>

✒️클라이언트가 서버가 살아있는지 죽어있는지 모르는 상태에서 그냥 보낸다. 따라서 클라이언트 입장에선 대상 서버가 이 패킷을 받을 수 있는 상태인지 모르게 된다.

2. 비신뢰성 - 패킷 소실  
✒️ <span style="color:#FF3232">패킷이 중간에 소실</span>될 경우 대처할 방법이 없어 문제가 생긴다.

3. 비신뢰성 - 패킷 순서 보장 ❌  
✒️ 패킷이 순서가 보장되지 않을 수 있다.

4. 도착해도 프로그램 구분 불가  
✒️ 단순히 목적지 주소(IP)만 알고 있고 세붖ㄱ으로 어디인지는 구체적으로 알지 못한다는 문제점도 있다.  
✒️ 예를들어 같은 IP를 사용하는 서버에서 통신하는 어플리케이션이 여러개일 경우 이를 구분하는 방법이 있다.

## TCP(Transmission Control Protocol)
✒️ 전송 제어 프로토콜(Transmission Control Protocol)  
✒️ 데이터 전달 보증하고 순서를 보장하는 신뢰할 수 있는 프로토콜을 일컫는 말이다.  
✒️ 컴퓨터끼리 '보냈습니다','도착했습니다'라고 서로 확인 메세지를 보내면서 데ㅣ터를 주고 받음으로써 통신의 신뢰성을 확립, 한마디로 TCP는 IP으 ㅣ문제를 보안해주는 녀석이라고 보면 된다.  
✒️ TCP 3 way handshake(가상 연결)으로 전송을 제어한다.
✒️ <span style="color:#28A0FF">웹이나 메일,파일 공유</span>등과 같이 데이터를 누락시키고 싶지 않은 서비스에 사용


### TCP/IP 패킷 정보
✒️ 위에서 살펴본 ip 패킷에 tcp 패킷을 집어넣어 좀더 택배 화물을 강화한 것이라고 생각하면 된다.

✒️ 단순히 목적지 뿐만 아니라 순서, 검증, 전송 제어 정보가 들어있어, 기존 IP 패킷정보의 한계인 비신뢰성과 비연결성을 TCP 정보를 추가함으로써 한계를 극복하는 식이다.

#### TCP / IP 패킷 전달 과정
![](https://mblogthumb-phinf.pstatic.net/MjAyMTEwMDZfMjAx/MDAxNjMzNTIzNzE1MTYy.vkey5w6tMKjQQqianXfui8FkSgcNeiN-Vpq-D7tMQ00g._lYvoSqrlL1U_RoGpQWcNhOKkVS5k6E1FGLcnrnS4Hcg.PNG.sosow0212/image.png?type=w800)

1. 채팅 애플리케이션 프로그램에서 Socket 라이브러리 라는 것을 사용해 OS에 "Hello world!"라는 메세지를 넘긴다.

2. 그럼 컴퓨터 웅영체제쪽에서는 "Hello, world!"라는 메시지에 <span style="color:#5CEEE6">TCP 정보를 씌우고(초록색)</span>,<span style="color:#FFDC37">IP 정보를 또 씌운다(주황색).</span>

3. 이렇게 TCP/IP 패킷이 생성된다.

4. 이 데이터가 실제 랜 카드를 통해 나갈 때는 Ethernet frame을 포함새서 나간다(검정색). Ethernet frame에는 실제 물리적인 정보까지 들어있다.

## UDP (User Datagram Protocol)
✒️사용자 데이터그램 프로토콜(User Datagram Protocol)

✒️비 연결지향적 프로토콜로서, 데이터  전달 보증하지 않고 순서 보장하지도 않는다.

✒️TCP에 비교해서 기능이 거의 없어 단순하지만 오로지 빠르게 패킷을 보내는 것이 주 목적

✒️데이터를 보내면 그것으로 끝이므로 신뢰성은 없지만 확인 응답과 같은 절차를 생략할 수 있으므로 통신이 빠르기 때문에 도메인, 실시간 동영상 스트리밍 서비스에서 사용된다.

✒️IP와 거의 같다고 보면되고, IP 정보에 PORT와 체크섬(메시지 검증해주는 데이터) 정도만 추가된 형태

✒️IP에 기능이 거의 추가되지 않은 하얀 도화지 같은 상태이기 때문에 최적화 및 커스터마이징이 용이하다.

## TCP/UDP
![](https://velog.velcdn.com/images%2Fminho%2Fpost%2F17965d2a-13a7-406a-abc7-87333d945e94%2Fimage.png)


## PORT
**포트**(port) "**논리적인 접속장소**"이며, 특히 인터넷 프로토콜인 TCP/IP를 사용할 때에는 클라이언트 프로그램이 네트워크 상의 특정 서버 프로그램을 지정하는 방법으로 사용된다.  
네트워크 상에서 통신을 할 때 IP를 토대로 해당 서버가 있는 컴퓨터에 접근한다.


### PORT 번호
포트 번호는 컴퓨터에서 실해오디고 있는 서버를 짓기 위한 16비트의 논리적  할당으로 0~65536번이 존재한다.

이 중에 0~1023번까지느 이미 어떤 통신이 해당 포트를 사용할 것인지 정해져 있다.

예를 들어 http 통신은 **80번 포트**를 사용하고, ssh 통신은 22번 포트를 사용한다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fchk1tW%2FbtrqRTVe8IA%2FoFWttFjK5yI8kLhiEEsXG1%2Fimg.png)

## DNS
>DNS(Domain Name System)은 인터넷의 전화번호부와 같다.
google.com같은 도메인 이름으로 온라인 정보에 엑세스할 수 있다.
웹 브라우저는 IP 주소로 상호작용하는데, DNS는 도메인 이름을 IP 주소로 변환해 브라우저가 인터넷 리소스를 로드할 수 있도록 해준다.


**인터넷에 연결된 각 장치에는 다른 기계가 장치를 찾는데 필요한 고유한 IP주소가 있다**

DNS 서버는 IPv4, IPv6 체계의 복잡한 영숫자 IP 주소를 기억하지 않아도 된다.